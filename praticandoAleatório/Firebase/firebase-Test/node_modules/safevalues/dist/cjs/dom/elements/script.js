"use strict";
/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 */
Object.defineProperty(exports, "__esModule", { value: true });
exports.setSrc = exports.setTextContent = void 0;
const resource_url_impl_js_1 = require("../../internals/resource_url_impl.js");
const script_impl_js_1 = require("../../internals/script_impl.js");
const window_js_1 = require("../globals/window.js");
/** Propagates CSP nonce to dynamically created scripts. */
function setNonceForScriptElement(script) {
    const win = script.ownerDocument && script.ownerDocument.defaultView;
    const nonce = (0, window_js_1.getScriptNonce)(win || window);
    if (nonce) {
        script.setAttribute('nonce', nonce);
    }
}
/** Sets textContent from the given SafeScript. */
function setTextContent(script, v, options) {
    script.textContent = (0, script_impl_js_1.unwrapScript)(v);
    if (options === null || options === void 0 ? void 0 : options.omitNonce)
        return;
    setNonceForScriptElement(script);
}
exports.setTextContent = setTextContent;
/** Sets the Src attribute using a TrustedResourceUrl */
function setSrc(script, v, options) {
    script.src = (0, resource_url_impl_js_1.unwrapResourceUrl)(v);
    if (options === null || options === void 0 ? void 0 : options.omitNonce)
        return;
    setNonceForScriptElement(script);
}
exports.setSrc = setSrc;
